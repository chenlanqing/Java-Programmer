<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION， INSTEAD RE-RUN doctoc TO UPDATE -->
**目录**

- [一.单系统登录限制：](#%E4%B8%80%E5%8D%95%E7%B3%BB%E7%BB%9F%E7%99%BB%E5%BD%95%E9%99%90%E5%88%B6)
- [二.多系统登录：](#%E4%BA%8C%E5%A4%9A%E7%B3%BB%E7%BB%9F%E7%99%BB%E5%BD%95)
- [三.单点登录：(Single Sign On：SSO)](#%E4%B8%89%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95single-sign-onsso)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

# 一、单系统登录限制

## 1、http无状态协议

web应用采用browser/server架构，http作为通信协议，http是无状态协议，浏览器的每一次请求，服务器会独立处理，不与之前或之后的请求产生关联。既然http协议无状态，那就让服务器和浏览器共同维护一个状态吧!这就是会话机制

## 2、会话机制

- 浏览器第一次请求服务器，服务器创建一个会话，并将会话的id作为响应的一部分发送给浏览器，浏览器存储会话id，并在后续第二次和第三次请求中带上会话id，服务器取得请求中的会话id就知道是不是同一个用户了
- cookie是浏览器用来存储少量数据的一种机制，数据以"key/value"形式存储，浏览器发送http请求时自动附带cookie信息；

## 3、登录状态

浏览器第一次请求服务器需要输入用户名与密码验证身份，服务器拿到用户名密码去数据库比对，正确的话说明当前持有这个会话的用户是合法用户，应该将这个会话标记为“已授权”或者“已登录”等等之类的状态；如 Tomcat 第一次登录的时候设置登录状态，下一次登录的时候判断登录状态

# 二、多系统登录

单系统登录解决方案的核心是cookie，cookie携带会话id在浏览器与服务器之间维护会话状态，但cookie是有限制的，这个限制就是cookie的域(通常对应网站的域名)浏览器发送http请求时会自动携带与该域匹配的cookie而不是所有cookie；

为什么不将web应用群中所有子系统的域名统一在一个顶级域名下？共享cookie的方式存在众多局限
- 应用群域名得统一;
- 其次，应用群各系统使用的技术(至少是web服务器)要相同，不然cookie的key值(tomcat为JSESSIONID)不同，无法维持会话，共享cookie的方式是无法实现跨语言技术平台登录的
- cookie本身不安全

# 三、单点登录(Single Sign On：SSO)
## 1、概述
是指在多系统应用群中登录一个系统，便可在其他所有系统中得到授权而无需再次登录，包括单点登录与单点注销两部分

## 2、登录

- sso需要一个独立的认证中心，只有认证中心能接受用户的用户名密码等安全信息，其他系统不提供登录入口，只接受认证中心的间接授权，间接授权通过令牌实现，sso认证中心验证用户的用户名密码没问题，创建授权令牌，在接下来的跳转过程中，授权令牌作为参数发送给各个子系统，子系统拿到令牌，即得到了授权，可以借此创建局部会话，局部会话登录方式与单系统的登录方式相同；
- 用户登录成功之后，会与sso认证中心及各个子系统建立会话，用户与sso认证中心建立的会话称为全局会话，用户与各个子系统建立的会话称为局部会话，局部会话建立之后，用户访问子系统受保护资源将不再通过sso认证中心.全局会话与局部会话有如下约束关系：
	- A、局部会话存在，全局会话一定存在;
	- B、全局会话存在，局部会话不一定存在;
	- C、全局会话销毁，局部会话必须销毁;

## 3、注销

单点登录自然也要单点注销，在一个子系统中注销，所有子系统的会话都将被销毁

## 4、整个单点登录过程实质是sso客户端与服务端通信的过程

    
# 四、扫码登录


# 五、短信验证码登录


  # 参考资料
  * [单点登录](http：//www.cnblogs.com/ywlaker/p/6113927.html)  