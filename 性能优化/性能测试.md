# 1、基础概念

性能测试针对系统的性能指标，建立性能测试模型，制定性能测试方案，制定监控策略，在场景条件之下执行性能场景，分析判断性能瓶颈并调优，最终得出性能结果来评估系统的性能指标是否满足既定值

不要混淆了：压力测试、容量测试、极限测试等，这三种测试其实目的是一样的；

## 1.1、需要有指标

对“有指标”这个定义来说，理论上合理的，并且应该有的指标是：时间指标、容量指标和资源利用率指标

性能场景的需求指标：**业务指标和技术指标**，技术指标不能脱离业务指标，所有的技术指标都是在有业务场景的前提下制定的，而技术指标和业务指标之间也要有详细的换算过程。这样一来，技术指标就不会是一块飞地。同时，在回答了技术指标是否满足的同时，也能回答是否可以满足业务指标

## 1.2、需要有模型

模型是什么？它是真实场景的抽象，可以告诉性能测试人员，业务模型是什么样子。比如说，有 100 种业务，但不是每个业务都需要有并发量，可能只有 50 个业务有，那就要把这些有并发的业务统计出来，哪个业务并发多，哪个业务并发少，做压力时就要控制好这样的比例

## 1.3、要有方案

方案规定的内容中有几个关键点，分别是测试环境、测试数据、测试模型、性能指标、压力策略、准入准出和进度风险。基本上有这些内容就够了，这些内容具体的信息还需要精准

## 1.4、要有监控

要有分层、分段的能力，要有全局监控、定向监控的能力

## 1.5、要有预定的条件

这里的条件包括软硬件环境、测试数据、测试执行策略、压力补偿等内容

## 1.6、要有场景

对性能场景中的“场景”比较正宗的描述是：在既定的环境（包括动态扩展等策略）、既定的数据（包括场景执行中的数据变化）、既定的执行策略、既定的监控之下，执行性能脚本，同时观察系统各层级的性能状态参数变化，并实时判断分析场景是否符合预期；

性能场景也要有分类：
- 基准性能场景：这里要做的是单交易的容量，为混合容量做准备，即将每一个业务都压到最大TPS，从而为后续场景做数据对比；
- 容量性能场景：这一环节必然是最核心的性能执行部分。根据业务复杂度的不同，这部分的场景会设计出很多个；混合容量性能场景，即将所有业务根据比例添加到一个场景中，在数据、软硬件环境、监控等的配合下，分析瓶颈并调优的过程；
- 稳定性性能场景：稳定性测试必然是性能场景的一个分类。只是现在在实际的项目中，稳定性测试基本没和生产一致过。在稳定性测试中，显然最核心的元素是时间（业务模型已经在容量场景中确定了），而时间的设置应该来自于运维周期，而不是来自于老板、产品和架构等这些人的心理安全感。在长时间的运行下观察系统的性能表现；
- 异常性能场景：要做异常性能场景，前提就是要有压力。在压力流量之下，模拟异常；破坏性压力测试，异常场景：宕容器、宕虚拟机、宕缓存、宕队列、宕熔断等；

## 1.7、要有分析调优


## 1.8、要有结果报告

应该在报告中写上调优前后的 TPS、响应时间以及资源对比图
- 场景结果整理；
- 监控结果整理；
- 性能整体分析；
- 性能结论；
- 优化建议
- 运维建议

## 1.9、TPS与响应时间

在 TPS 增加的过程中，响应时间一开始会处在较低的状态，也就是在 A 点之前。接着响应时间开始有些增加，直到业务可以承受的时间点 B，这时 TPS 仍然有增长的空间。再接着增加压力，达到 C 点时，达到最大 TPS。我们再接着增加压力，响应时间接着增加，但 TPS 会有下降（请注意，这里并不是必然的，有些系统在队列上处理得很好，会保持稳定的 TPS，然后多出来的请求都被友好拒绝）。

# 参考资料
