# 一、Vert.X

- [Eclipse Vert.x](https://vertx.io/)
- [VertX资料](https://zhuanlan.zhihu.com/p/33832486)

# 二、RFC3339 时间

- [RFC3339](https://www.ietf.org/rfc/rfc3339.txt)

RFC3339 是 DateTime 格式的文档，其时间格式如下：`2019-10-12T07:20:50.52Z`

```java
// 跟JDK时间转换
public static LocalDateTime strToRfc3339(String str) throws Exception {
    final Instant instant = Instant.parse(str);
    final OffsetDateTime offsetDateTime = instant.atOffset(ZoneOffset.of("+8"));
    System.out.println(offsetDateTime);
    return offsetDateTime.toLocalDateTime();
}
```
上述结果：
```
输入：2022-04-12T07:20:50.52Z
输出：2022-04-12T15:20:50.520+08:00
```

# 三、插件开发

## 1、vscode插件

- [VSCode插件开发全攻略（一）](http://blog.haoji.me/vscode-plugin-overview.html)

## 2、Chrome插件

- [Chrome插件(扩展)开发全攻略](http://blog.haoji.me/chrome-plugin-develop.html)

# 四、ANTLR：语法解析器

- [antlr-抢到语法解析器](https://www.antlr.org/)

# 五、低代码

https://www.mendix.com/zh/low-code-guide/

https://www.infoq.cn/article/gh6hucbsj32qucudatos

低代码专指低代码应用开发平台（LCAP）

# 六、JSON

[mapstruct](https://mapstruct.org/)

# 七、不可变

https://immutables.github.io/getstarted.html

# 八、sql解析

https://github.com/JSQLParser/JSqlParser

# 九、工具包

https://gitee.com/ahong0201/project-util

# 静态代码扫描

- [代码扫描原理](https://mp.weixin.qq.com/s/RwzprbY2AhdgslY8tbVL-A)

## 1、阿里巴巴P3C插件

P3C 是阿里开源代码库的插件工程名称，它以阿里巴巴Java开发手册为标准，用于监测代码质量的 IDEA/Eclipse 插件。
- 源码地址：[P3C](https://github.com/alibaba/p3c)
- 插件源码：[P3C-idea-plugin](https://github.com/alibaba/p3c/blob/master/idea-plugin)
- 规约源码：[P3C-MD](https://github.com/alibaba/p3c/tree/master/p3c-pmd)

### 1.1、插件配置 p3c.xml

```xml
<action class="com.alibaba.p3c.idea.action.AliInspectionAction" id="AliP3CInspectionAction" popup="true" text="编码规约扫描" icon="P3cIcons.ANALYSIS_ACTION">
    <keyboard-shortcut keymap="$default" first-keystroke="shift ctrl alt J"/>
    <add-to-group group-id="MainToolBar" anchor="last"/>
    <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
    <add-to-group group-id="ChangesViewPopupMenu" anchor="last"/>
    <add-to-group group-id="EditorPopupMenu" anchor="last"/>
</action>
```
- 在使用 P3C 插件的时候，最明显的就是 `编码规约扫描` 通过源码中找到这个关键字，看它都涉及了哪个类都配置。
- action 是 IDEA 插件中用于配置窗体事件入口都地方，以及把这个操作配置到哪个按钮下和对应都快捷键；

### 1.2、编码规约扫描( AliInspectionAction)

```java
class AliInspectionAction : AnAction() {
    override fun actionPerformed(e: AnActionEvent) {
        val project = e.project ?: return
        val analysisUIOptions = ServiceManager.getService(project, AnalysisUIOptions::class.java)!!
        analysisUIOptions.GROUP_BY_SEVERITY = true

        val managerEx = InspectionManager.getInstance(project) as InspectionManagerEx
        val toolWrappers = Inspections.aliInspections(project) {
            it.tool is AliBaseInspection
        }
        val psiElement = e.getData<PsiElement>(CommonDataKeys.PSI_ELEMENT)
        val psiFile = e.getData<PsiFile>(CommonDataKeys.PSI_FILE)
        val virtualFile = e.getData<VirtualFile>(CommonDataKeys.VIRTUAL_FILE)
        
		...
		
		createContext(
    	toolWrappers, managerEx, element,
    	projectDir, analysisScope
		).doInspections(analysisScope)
}		
```
这是一个基于 kotlin 语言开发的插件代码逻辑，它通过 actionPerformed 方法获取到工程信息、类信息等，接下来就可以执行代码检查了 doInspections

### 1.3、规约 p3c-pmd

在P3C的源码中可用看到有一个 p3c-md，这个工程里面有如下依赖：
```xml
<dependency>
    <groupId>net.sourceforge.pmd</groupId>
    <artifactId>pmd-java</artifactId>
    <version>6.15.0</version>
</dependency>
<dependency>
    <groupId>net.sourceforge.pmd</groupId>
    <artifactId>pmd-vm</artifactId>
    <version>6.15.0</version>
</dependency>
<dependency>
    <groupId>net.sourceforge.pmd</groupId>
    <artifactId>pmd-test</artifactId>
    <version>6.15.0</version>
    <scope>test</scope>
</dependency>
```
其中 PMD 是一款采用 BSD 协议发布的Java 程序静态代码检查工具，当使用PMD规则分析Java源码时，PMD 首先利用JavaCC和 EBNF 文法产生了一个语法分析器，用来分析普通文本形式的Java代码，产生符合特定语法结构的语法，同时又在JavaCC的基础上添加了语义的概念即JJTree，通过JJTree的一次转换，这样就将Java代码转换成了一个AST，AST是Java符号流之上的语义层，PMD把AST处理成一个符号表。然后编写PMD规则，一个PMD规则可以看成是一个Visitor，通过遍历AST找出多个对象之间的一种特定模式，即代码所存在的问题。具体自定义规则的方式，通过自定义Java类和XPATH规则实现
